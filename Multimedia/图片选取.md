# 使用系统API获取图片

## 配置隐私权限
图片、视频和相机是用户的隐私数据，因此需要访问这些内容的时候，必须预先在`Info.plist`中配置隐私权限，描述清楚访问照片和相机的用途。这样在访问照片的时候，系统会向用户弹出提示框，并把相关权限描述展示给用户，只有用户同意之后，才能访问这些隐私数据。

具体的配置如下：

```xml
<!-- 录制音频的权限 -->
<key>NSMicrophoneUsageDescription</key>
<string>录制视频的同时需要录制声音</string>

<!-- 访问照片库的权限 -->
<key>NSPhotoLibraryUsageDescription</key>
<string>获取图片</string>

<!-- 使用相机的权限 -->
<key>NSCameraUsageDescription</key>
```
## 创建启动图片选择页面
苹果为我们提供了访问系统相册和相机的类 —— `UIImagePickerController`类，这个类封装了从照片库图片选取和相机拍摄照片的功能。这个类使用起来非常简单：

```objective-c
 // 创建UIImagePickerController的实例
 UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
 
 // 因为UIImagePickerController本身是控制器，所以使用启动控制器的方式启动它即可
 [UIViewController presentViewController:imagePickerController animated:YES completion:nil];
```
## 配置图片来源
`UIImagePickerController`提供了三种获取图片的方式：
> * UIImagePickerControllerSourceTypeCamera（相机）
> * UIImagePickerControllerSourceTypeSavedPhotosAlbum（相册）
> * UIImagePickerControllerSourceTypePhotoLibrary（图片库）

具体使用哪一种方式，可以通过设置`UIImagePickerController`的`sourceType`属性来指定。但是在设置前要先判断这种方式是否被设备支持，如果设置了不支持的方式，程序就运行时就会崩溃。比如`UIImagePickerControllerSourceTypeCamera`在模拟器上默认是不支持的，所以如果设置这样的源，在模拟器上运行就会抛出异常。


```
// sourceType默认值为UIImagePickerControllerSourceTypePhotoLibrary，也就是在不设置的情况下，默认从图片库获取照片。这里设置为UIImagePickerControllerSourceTypeCamera，表示从相机拍摄照片
imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
```







